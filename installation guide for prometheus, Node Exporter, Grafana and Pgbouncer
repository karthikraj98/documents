1Ô∏è‚É£ Install Prometheus

# Update system
sudo apt update && sudo apt upgrade -y

# Create Prometheus user
sudo useradd --no-create-home --shell /bin/false prometheus

# Create directories
sudo mkdir /etc/prometheus /var/lib/prometheus

# Download Prometheus (latest stable)
cd /tmp
wget https://github.com/prometheus/prometheus/releases/download/v2.55.1/prometheus-2.55.1.linux-amd64.tar.gz
tar -xvf prometheus-2.55.1.linux-amd64.tar.gz
cd prometheus-2.55.1.linux-amd64

# Move binaries
sudo mv prometheus /usr/local/bin/
sudo mv promtool /usr/local/bin/

# Move config and consoles
sudo mv consoles /etc/prometheus
sudo mv console_libraries /etc/prometheus
sudo mv prometheus.yml /etc/prometheus/prometheus.yml

# Set ownership
sudo chown -R prometheus:prometheus /etc/prometheus /var/lib/prometheus
sudo chown prometheus:prometheus /usr/local/bin/prometheus /usr/local/bin/promtool


Create Prometheus service

sudo nano /etc/systemd/system/prometheus.service

Paste:

[Unit]
Description=Prometheus
Wants=network-online.target
After=network-online.target

[Service]
User=prometheus
Group=prometheus
Type=simple
ExecStart=/usr/local/bin/prometheus \
  --config.file=/etc/prometheus/prometheus.yml \
  --storage.tsdb.path=/var/lib/prometheus/ \
  --web.listen-address=:9090

[Install]
WantedBy=multi-user.target

Start service:

sudo systemctl daemon-reload
sudo systemctl enable prometheus
sudo systemctl start prometheus
sudo systemctl status prometheus

üëâ Access Prometheus: http://<server-ip>:9090


2Ô∏è‚É£ Install Node Exporter

# Create user
sudo useradd --no-create-home --shell /bin/false node_exporter

# Download
cd /tmp
wget https://github.com/prometheus/node_exporter/releases/download/v1.8.2/node_exporter-1.8.2.linux-amd64.tar.gz
tar -xvf node_exporter-1.8.2.linux-amd64.tar.gz
cd node_exporter-1.8.2.linux-amd64

# Move binary
sudo mv node_exporter /usr/local/bin/

# Set ownership
sudo chown node_exporter:node_exporter /usr/local/bin/node_exporter

Create service: 

sudo nano /etc/systemd/system/node_exporter.service

Paste:

[Unit]
Description=Node Exporter
After=network.target

[Service]
User=node_exporter
Group=node_exporter
Type=simple
ExecStart=/usr/local/bin/node_exporter

[Install]
WantedBy=multi-user.target

Start service:

sudo systemctl daemon-reload
sudo systemctl enable node_exporter
sudo systemctl start node_exporter
sudo systemctl status node_exporter

üëâ Node Exporter metrics: http://<server-ip>:9100/metrics

Add Node Exporter to Prometheus config

Edit:

sudo nano /etc/prometheus/prometheus.yml

Add under scrape_configs:

  - job_name: "node_exporter"
    static_configs:
      - targets: ["localhost:9100"]

Restart Prometheus:

sudo systemctl restart prometheus

3Ô∏è‚É£ Install Grafana

# Add Grafana repo
sudo apt-get install -y apt-transport-https software-properties-common
sudo mkdir -p /etc/apt/keyrings/
wget -q -O - https://packages.grafana.com/gpg.key | sudo gpg --dearmor -o /etc/apt/keyrings/grafana.gpg
echo "deb [signed-by=/etc/apt/keyrings/grafana.gpg] https://packages.grafana.com/oss/deb stable main" | sudo tee /etc/apt/sources.list.d/grafana.list

# Install Grafana
sudo apt update
sudo apt install grafana -y

# Enable and start
sudo systemctl enable grafana-server
sudo systemctl start grafana-server
sudo systemctl status grafana-server

üëâ Grafana: http://<server-ip>:3000
Default login: admin / admin (you‚Äôll be asked to change password).

‚úÖ Now you have:

Prometheus running on port 9090

Node Exporter running on port 9100

Grafana running on port 3000

From Grafana, add Prometheus as a data source ‚Üí then you can import dashboards (Node Exporter dashboard ID 1860 is a popular one).


Install NGINX:

sudo apt update && sudo apt install nginx -y

Configure Odoo service (example)

Make sure your Odoo service is running.
By default Odoo runs on http://localhost:8069.
You don‚Äôt need to expose 8069 publicly when NGINX is handling requests.

Configure NGINX for Odoo

Create a new config file:

sudo nano /etc/nginx/sites-available/odoo.conf
                                                        
server {
    listen 80;
    server_name 192.168.168.180;  # Replace with your LAN IP or domain

    location / {
        proxy_pass http://127.0.0.1:1616;  # Your actual Odoo port
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

Enable the configuration:

sudo ln -s /etc/nginx/sites-available/odoo.conf /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx

Now you can access:

http://example.com ‚Üí Odoo main interface
http://example.com/longpolling ‚Üí Odoo bus/notifications


Install PgBouncer

sudo apt update
sudo apt install pgbouncer -y

Configure PgBouncer

Edit the main config file:

sudo nano /etc/pgbouncer/pgbouncer.ini

Example configuration:

[databases]
# Map Odoo DB connections (change odoo17 with your db name)

odoo17 = host=127.0.0.1 port=5432 dbname=odoo17 user=odoo password=admin

[pgbouncer]
listen_addr = 0.0.0.0
listen_port = 6432
auth_type = md5
auth_file = /etc/pgbouncer/userlist.txt
pool_mode = transaction
max_client_conn = 1000
default_pool_size = 50
reserve_pool_size = 20
logfile = /var/log/pgbouncer/pgbouncer.log
pidfile = /var/run/postgresql/pgbouncer.pid

Create userlist file:

This file contains the database users and passwords.

sudo nano /etc/pgbouncer/userlist.txt

Example (replace with your PostgreSQL role + password):

"odoo" "admin"

Adjust Permissions: 

sudo chown postgres:postgres /etc/pgbouncer/pgbouncer.ini /etc/pgbouncer/userlist.txt
sudo chmod 640 /etc/pgbouncer/userlist.txt

Enable & Start PgBouncer: 

sudo systemctl enable pgbouncer
sudo systemctl start pgbouncer
sudo systemctl status pgbouncer

PgBouncer will now listen on port 6432.

Configure Odoo to Use PgBouncer:

Edit your Odoo config file (example /etc/odoo17.conf):

[options]
db_host = 127.0.0.1
db_port = 6432
db_user = odoo
db_password = admin

Restart Odoo:

sudo systemctl restart odoo17

Verify Connection

Check PgBouncer stats:

psql -U odoo -h 127.0.0.1 -p 6432 -d odoo17 -c "SHOW POOLS;"

‚úÖ Now, PgBouncer is handling connection pooling for Odoo ‚Üí PostgreSQL.
This will improve performance under heavy load and reduce PostgreSQL connection spikes.


1) Remove Existing pgAdmin

sudo apt remove --purge pgadmin4* -y
sudo apt autoremove -y
sudo rm -rf ~/.pgadmin

2) Install pgAdmin (Desktop App)

The pgAdmin team provides packages via their repo.
Add pgAdmin repository

curl https://www.pgadmin.org/static/packages_pgadmin_org.pub | sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/pgadmin.gpg
sudo sh -c 'echo "deb https://ftp.postgresql.org/pub/pgadmin/pgadmin4/apt/$(lsb_release -cs) pgadmin4 main" > /etc/apt/sources.list.d/pgadmin4.list'
sudo apt update

3) Install Desktop version

sudo apt install pgadmin4-desktop -y

4) Launch pgAdmin App

After installation:

pgadmin4

Or find it in your Ubuntu Applications menu as pgAdmin 4.












