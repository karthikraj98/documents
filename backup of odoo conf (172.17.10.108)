Changes made in H0 (172.17.10.108) SERVER 


before changing the configuration

[options]
   ; This is the password that allows database operations:
   admin_passwd = odoo17
   db_host = localhost
   db_port = 6432
   db_user = odoo17ent
   db_password = admin
   addons_path = /odoo17ent/enterprise_addons_17,/odoo17ent/addons,/odoo17ent/CMR-HO
   http_port = 1717
   limit_time_real = 120000000000
;    workers = 20
;    max_cron_threads = 2
;    limit_memory_soft = 2147483648
;    limit_memory_hard = 2576980377
;    limit_request = 8192
;    limit_time_cpu = 60
;    gevent_port = 8072


Odoo configuration and worker configuration after upgrading to 256GB RAM and 2.2TB SSD 

after changing the odoo configuration

[options]
   ; This is the password that allows database operations:
   admin_passwd = odoo17
   db_host = 127.0.0.1
   db_port = 6432
   db_user = odoo17ent
   db_password = admin
   addons_path = /odoo17ent/enterprise_addons_17,/odoo17ent/addons,/odoo17ent/CMR-HO
   http_port = 1717
   workers = 20
   limit_memory_soft = 42949672960
   limit_memory_hard = 53687091200
   db_maxconn = 64
   max_cron_threads = 4
   preload = True
   limit_request = 8192
   limit_time_real = 240
   limit_time_cpu = 120
   proxy_mode = True
   without_demo = all
   gevent_port = 8072
   
   
   
   postgresql changes :- 
   
   
   max_connections = 120                   # (change requires restart)
   superuser_reserved_connections = 10 
   shared_buffers = 64GB   
   work_mem = 128MB 
   maintenance_work_mem = 4GB   
   effective_io_concurrency = 300 
   synchronous_commit = off 
   full_page_writes = off  
   wal_buffers = 64MB 
   checkpoint_timeout = 15min              # range 30s-1d
   checkpoint_completion_target = 0.9 
   max_wal_size = 32GB
   min_wal_size = 4GB
   random_page_cost = 1.1   
   effective_cache_size = 192GB
   jit = off    
   log_autovacuum_min_duration = 250ms 
   autovacuum = on                 # Enable autovacuum subprocess?  'on'
                                        # requires track_counts to also be on.
   autovacuum_max_workers = 8              # max number of autovacuum subprocesses
                                        # (change requires restart)
   autovacuum_naptime = 60s  
   autovacuum_vacuum_scale_factor = 0.03   # fraction of table size before vacuum
   autovacuum_analyze_scale_factor = 0.01  # fraction of table size before analyze
   autovacuum_vacuum_cost_limit = 2000     # default vacuum cost limit for
   idle_in_transaction_session_timeout = 10min  # in milliseconds, 0 is disabled

   
   pgbouncer configuration changes :-
   
   [databases]
   postgres = host=127.0.0.1 port=5432 dbname=postgres user=odoo17ent password=admin
   PRODUCTION_115 = host=127.0.0.1 port=5432 dbname=PRODUCTION_115
   
   listen_addr = localhost
   listen_port = 6432
   auth_type = md5
   pool_mode = transaction
   stats_period = 60
   max_client_conn = 1300
   default_pool_size = 100
   reserve_pool_size = 50
   reserve_pool_timeout = 5
   log_connections = 1
   log_disconnections = 1
   log_pooler_errors = 1
   server_lifetime = 3600
   server_idle_timeout = 30
   query_timeout = 120
   idle_transaction_timeout = 60
   
   
   
   Nginx configuration 
   
   ### CRITICAL FOR HIGH-TRAFFIC SITES: PROXY & TIMEOUT SETTINGS ###
    # These settings prevent 90% of "connection lost" issues at the Nginx layer.
    proxy_connect_timeout 600s;     # Max time to connect to Odoo upstream
    proxy_send_timeout 600s;        # Max time to send request to Odoo
    proxy_read_timeout 600s;         # Max time to wait for response from Odoo (VERY IMPORTANT for long reports/operations)

    proxy_buffers 16 64k;           # Number and size of buffers for response headers
    proxy_buffer_size 128k;          # Initial portion of response is buffered here

   
   
   
   
   
   
   
   
   
   
   
   
   


   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   


